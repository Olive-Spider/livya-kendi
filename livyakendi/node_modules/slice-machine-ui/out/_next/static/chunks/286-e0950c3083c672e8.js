(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{15836:function(e,n,r){"use strict";r.d(n,{Z:function(){return L}});var i,t=r(62230),s=r(85244),o=r(52322),a=r(2784),l=r(56580),c=r(75289),u=r(54132),d=r(951),x=r(75100),p=r(25812),h=r(77174),f=r(24340),v=r(90374),g=r(22710),m=r(99267),j=r(76473),b=r(88932),y=r(75329),C=r(61931),F=r(67557),w=r(82770);function E(e){return I.apply(this,arguments)}function I(){return(I=(0,g.Z)(function(e){var n,r,i,o,a,l,c,u,d,x;return(0,m.__generator)(this,function(p){switch(p.label){case 0:n=e.variationId,r=e.slice,i=e.file,o=e.method,p.label=1;case 1:return p.trys.push([1,3,,4]),(a=new FormData).append("file",i),a.append("libraryName",r.from),a.append("sliceName",r.model.name),a.append("variationId",n),[4,(0,w.XQ)({libraryName:r.from,sliceId:r.model.id,variationId:n,file:i})];case 2:if(c=(l=p.sent()).errors,u=l.url,c.length>0)throw c;return w.Xe.track({event:"screenshot-taken",type:"custom",method:o}),[2,(0,s.Z)((0,t.Z)({},r),{screenshots:(0,s.Z)((0,t.Z)({},r.screenshots),(0,F.Z)({},n,{url:u}))})];case 3:return d=p.sent(),x="Screenshot not saved",console.error(x,d),b.Am.error(x),[3,4];case 4:return[2]}})})).apply(this,arguments)}var S,D=function(e){var n=e.inputFile,r=e.handleFile,i=e.children,t=e.isDragActive;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.__,{htmlFor:"input-file",variant:"buttons.white",sx:{p:2,px:0,display:"flex",justifyContent:"center",width:200,alignItems:"center",flex:1},children:i||"Select file"}),(0,o.jsx)("input",{id:"input-file",type:"file",ref:n,style:{display:"none"},accept:y.nG.map(function(e){return"image/".concat(e)}).join(","),onChange:function(e){var n;r(null===(n=e.target.files)||void 0===n?void 0:n[0],t)}})]})},k=function(){return(0,o.jsx)(c.kC,{variant:"boxes.centered",sx:{p:2,position:"absolute",height:"100%",width:"100%",background:"rgba(249, 248, 249, 0.7)",backdropFilter:"blur(5px)",zIndex:"1",pointerEvents:"none"},children:(0,o.jsxs)(c.kC,{variant:"boxes.centered",sx:{border:"1px dashed #6E56CF",height:"100%",width:"100%",borderRadius:"4px"},children:[(0,o.jsx)(Z,{isActive:!0}),(0,o.jsx)(c.xv,{sx:{my:2},children:"Drop file here"}),(0,o.jsx)(c.xv,{variant:"secondary",children:"Maximum upload size file: 128Mb"})]})})},Z=function(e){var n=e.isActive;return(0,o.jsx)(c.kC,{sx:{p:1,borderRadius:"50%",bg:n?"#F1EEFE":"#EDECEE",alignItems:"center",justifyContent:"center",width:"48px",height:"48px"},children:(0,o.jsx)(d.IEK,{style:{color:n?"#6E56CF":"#6F6E77",fontSize:"34px"}})})},_=function(e){var n,r,i,l,u,d,x=e.variationID,p=e.slice,h=e.imageTypes,f=void 0===h?y.nG:h,F=e.onUploadSuccess,w=p.screenshots[x],I=(0,v.Z)().saveSliceCustomScreenshotSuccess,S=(0,a.useState)(!1),_=S[0],M=S[1],R=(0,a.useState)(!1),H=R[0],A=R[1],z=(0,a.useState)(!1),O=z[0],V=z[1];(0,j.y1)(["meta+v","ctrl+v"],function(){q()},[x,p,]);var P,B,L=(i=(r={onHandleFile:(n=(0,g.Z)(function(e,n){var r,i;return(0,m.__generator)(this,function(t){switch(t.label){case 0:return V(!0),[4,E({slice:p,file:e,method:n?"dragAndDrop":"upload",variationId:x})];case 1:return r=t.sent(),A(!1),(i=null==r?void 0:r.screenshots[x])&&(I(x,i,r),F&&F(r)),V(!1),[2]}})}),function(e,r){return n.apply(this,arguments)})}).onHandleFile,l=(0,a.useRef)(null),u=(0,g.Z)(function(e,n){return(0,m.__generator)(this,function(r){switch(r.label){case 0:if(!e)return[3,2];return[4,i(e,n)];case 1:r.sent(),(null==l?void 0:l.current)&&(l.current.value=""),r.label=2;case 2:return[2]}})}),{handleFile:d=function(e,n){return u.apply(this,arguments)},inputFile:l,FileInputRenderer:D,fileInputProps:{inputFile:l,handleFile:d}}),N=L.FileInputRenderer,T=L.fileInputProps,U=(P=(0,g.Z)(function(e){var n,r;return(0,m.__generator)(this,function(i){switch(i.label){case 0:if(e.size>128e6)return[2,b.Am.error("File is too big. Max file size: 128Mb.")];return V(!0),[4,E({slice:p,file:e,method:"dragAndDrop",variationId:x})];case 1:return(r=null==(n=i.sent())?void 0:n.screenshots[x])&&(I(x,r,n),F&&F(n)),V(!1),[2]}})}),function(e){return P.apply(this,arguments)}),W="function"==typeof navigator.clipboard.read,q=(B=(0,g.Z)(function(){var e,n,r,i,t;return(0,m.__generator)(this,function(s){switch(s.label){case 0:if(!W)return[2];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,navigator.clipboard.read()];case 2:if(!(void 0!==(e=s.sent())[0])||!(void 0!==(n=e[0].types.find(function(e){return f.map(function(e){return"image/".concat(e)}).includes(e)}))))return[3,4];return[4,e[0].getType(n)];case 3:return r=s.sent(),i=new File([r],"file"),[2,U(i)];case 4:return[3,6];case 5:return t=s.sent(),console.error("Could not paste file",t),[3,6];case 6:return[2]}})}),function(){return B.apply(this,arguments)}),G=function(e){e.preventDefault(),M(!1);var n,r=null===(n=e.dataTransfer.files)||void 0===n?void 0:n[0];if(void 0!==r)return f.some(function(e){return"image/".concat(e)===r.type})?void U(r):b.Am.error("Only files of type ".concat(f.join(", ")," are accepted."))},X=function(e){return function(n){n.preventDefault(),M(e)}},K=function(e){return function(n){n.preventDefault(),A(e)}};return(0,o.jsxs)(c.kC,{as:"form",variant:"boxes.centered",sx:{bg:"#F9F8F9",position:"relative",borderRadius:"6px",height:"320px"},onDragEnter:X(!0),onDragLeave:X(!1),onDragOver:X(!0),onMouseEnter:K(!0),onMouseLeave:K(!1),onSubmit:function(e){return e.preventDefault()},onDrop:G,children:[O?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.$j,{}),(0,o.jsx)(c.xv,{sx:{my:2},children:"Uploading file ..."})]}):null,O||void 0===w?null:(0,o.jsx)(C.q,{src:w.url,sx:{width:"100%",height:"100%",maxHeight:"100%",backdropFilter:"blur(5px)"}}),O?null:(0,o.jsx)(c.kC,{sx:{p:2,position:"absolute",width:"100%",height:"100%",borderRadius:"6px",background:"#F9F8F9B2",justifyContent:"center",alignItems:"center",visibility:H||void 0===w?"visible":"hidden"},children:(0,o.jsx)(c.kC,{variant:"boxes.centered",sx:{border:"1px dashed #6E56CF",height:"100%",width:"100%",borderRadius:"4px"},children:(0,o.jsxs)(c.kC,{sx:{width:"100%",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[(0,o.jsx)(Z,{isActive:_}),(0,o.jsx)(c.xv,{sx:{my:2},children:W?"Paste, drop or ...":"Drop or ..."}),(0,o.jsx)(N,(0,s.Z)((0,t.Z)({},T),{isDragActive:_})),(0,o.jsx)(c.xv,{sx:{color:"greyIcon",mt:1},children:"Maximum file size: 128Mb"})]})})}),_?(0,o.jsx)(k,{}):null]})},M=function(e){return(0,o.jsxs)("svg",(0,s.Z)((0,t.Z)({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_5065_192538)",children:[(0,o.jsx)("path",{d:"M9.66862 19.9993C11.1406 19.9993 12.3353 18.8047 12.3353 17.3327V14.666H9.66862C8.19662 14.666 7.00195 15.8607 7.00195 17.3327C7.00195 18.8047 8.19662 19.9993 9.66862 19.9993Z",fill:"#0ACF83"}),(0,o.jsx)("path",{d:"M7.00195 12.0007C7.00195 10.5287 8.19662 9.33398 9.66862 9.33398H12.3353V14.6673H9.66862C8.19662 14.6673 7.00195 13.4727 7.00195 12.0007Z",fill:"#A259FF"}),(0,o.jsx)("path",{d:"M7.00195 6.66667C7.00195 5.19467 8.19662 4 9.66862 4H12.3353V9.33333H9.66862C8.19662 9.33333 7.00195 8.13867 7.00195 6.66667Z",fill:"#F24E1E"}),(0,o.jsx)("path",{d:"M12.334 4H15.0007C16.4727 4 17.6673 5.19467 17.6673 6.66667C17.6673 8.13867 16.4727 9.33333 15.0007 9.33333H12.334V4Z",fill:"#FF7262"}),(0,o.jsx)("path",{d:"M17.6673 12.0007C17.6673 13.4727 16.4727 14.6673 15.0007 14.6673C13.5287 14.6673 12.334 13.4727 12.334 12.0007C12.334 10.5287 13.5287 9.33398 15.0007 9.33398C16.4727 9.33398 17.6673 10.5287 17.6673 12.0007Z",fill:"#1ABCFE"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_5065_192538",children:(0,o.jsx)("rect",{width:"10.6688",height:"16",fill:"white",transform:"translate(7 4)"})})})]}))};(S=i||(i={})).Mac="Mac",S.Linux="Linux",S.Windows="Windows";var R=function(){var e=navigator.userAgent,n=i.Linux;return Object.values(i).forEach(function(r){e.includes(r)&&(n=r)}),n},H=r(36416),A=r.n(H),z=function(e){var n=e.children;return(0,o.jsx)("kbd",{className:A().root,children:n})},O=function(){var e,n=[i.Windows,i.Linux].includes(R())?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z,{children:"ctrl"})," + ",(0,o.jsx)(z,{children:"shift"})," + ",(0,o.jsx)(z,{children:"c"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z,{children:"cmd"})," + ",(0,o.jsx)(z,{children:"shift"})," + ",(0,o.jsx)(z,{children:"c"})]});return(0,o.jsxs)(c.kC,{sx:{pl:"4px",alignItems:"center",color:"#000",borderRadius:"6px",fontSize:"12px",lineHeight:"24px",border:"1px solid #E4E2E4",boxShadow:"0px 1px 0px 0px rgba(0, 0, 0, 0.04)",width:"100%",minHeight:"40px"},children:[(0,o.jsx)(M,{}),(0,o.jsxs)("div",{children:["Use\xa0",n," to copy any frame as .png, then just paste it here"]})]})},V=function(e){var n=e.isValid;return(0,o.jsx)(c.kC,{sx:{p:2,border:"1px solid #E4E2E4",borderRadius:"6px",bg:"#FFF"},children:n?(0,o.jsx)(d.Ypm,{style:{fontSize:"16px"}}):(0,o.jsx)(x.j6O,{style:{fontSize:"16px",color:"#ED811C"}})})},P=function(e){var n=e.slice,r=e.onSelectVariation,i=e.variationSelector;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(c.X6,{as:"h4",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.model.name}),(0,o.jsx)(c.xu,{children:(0,o.jsx)(c.xu,{as:"ul",sx:{pl:0,my:3},children:n.model.variations.map(function(e){var a=i.sliceID,l=i.variationID,u=a===n.model.id&&l===e.id;return(0,o.jsx)(c.xu,{as:"li",sx:(0,s.Z)((0,t.Z)({listStyle:"none",my:2,p:2,cursor:"pointer",borderRadius:"4px"},u&&{bg:"#EDECEE",fontWeight:"500"}),{":hover":{bg:"#EDECEE"}}),onClick:function(){return r({sliceID:n.model.id,variationID:e.id})},children:(0,o.jsxs)(c.kC,{sx:{alignItems:"center"},children:[(0,o.jsx)(V,{isValid:!!n.screenshots[e.id]}),(0,o.jsx)(c.xv,{sx:{ml:2},children:e.name})]})},"".concat(n.model.id,"-").concat(e.id))})})})]})},B=function(e,n){return e||(n.length?{sliceID:n[0].model.id,variationID:n[0].model.variations[0].id}:void 0)},L=function(e){var n=e.slices,r=e.defaultVariationSelector,i=e.onUploadSuccess,t=(0,v.Z)().closeModals,s=(0,l.v9)(function(e){return{isOpen:(0,h.gP)(e,f.q.SCREENSHOTS)}}).isOpen,d=(0,a.useState)(B(r,n)),x=d[0],g=d[1];if((0,a.useEffect)(function(){g(B(r,n))},[null==r?void 0:r.sliceID,null==r?void 0:r.variationID,s,]),0===n.length||!x)return null;var m,j="function"==typeof navigator.clipboard.read;return(0,o.jsx)(p.Z,{isOpen:s,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return t()},children:(0,o.jsx)(u.Z,{radius:"0px",bodySx:{p:0,bg:"#FFF",position:"relative"},sx:{border:"none"},Header:function(e){var n=e.radius;return(0,o.jsxs)(c.kC,{sx:{position:"sticky",top:0,zIndex:1,background:"gray",p:"16px",alignItems:"center",justifyContent:"space-between",borderTopLeftRadius:n,borderTopRightRadius:n,borderBottom:function(e){var n;return"1px solid ".concat(String(null===(n=e.colors)||void 0===n?void 0:n.borders))}},children:[(0,o.jsx)(c.X6,{sx:{fontSize:"20px"},children:"Slice screenshots"}),(0,o.jsx)(c.x8,{type:"button",onClick:function(){return t()}})]})},Footer:null,children:(0,o.jsxs)(c.xu,{sx:{display:"flex",flexWrap:"wrap",height:"100%"},children:[(0,o.jsx)(c.xu,{sx:{p:3,bg:"grey07",flexGrow:1,overflow:"auto",maxHeight:"100%",flexBasis:"sidebar"},children:n.map(function(e,n){return(0,o.jsx)(P,{slice:e,variationSelector:x,onSelectVariation:g},"".concat(e.model.id,"-").concat(n))})}),(0,o.jsxs)(c.kC,{as:"main",sx:{p:3,flexGrow:99999,flexBasis:0,flexDirection:"column",minWidth:320,gap:"8px"},children:[j?(0,o.jsx)(O,{}):void 0,(m=n.find(function(e){return e.model.id===x.sliceID}))?(0,o.jsx)(_,{variationID:x.variationID,slice:m,onUploadSuccess:i}):null]})]})})})}},61931:function(e,n,r){"use strict";r.d(n,{q:function(){return c}});var i=r(62230),t=r(52322),s=r(2784),o=r(75289),a=r(65186),l=(0,s.memo)(function(e){var n=e.src;return(0,t.jsx)(o.Ee,{src:n,alt:"Preview image",sx:{maxHeight:"100%"}})}),c=function(e){var n=e.src,r=e.sx;return(0,t.jsx)(o.kC,{sx:(0,i.Z)({position:"relative",alignItems:"center",justifyContent:"center",overflow:"hidden",backgroundImage:"url(/pattern.png)",backgroundColor:"headSection",backgroundRepeat:"repeat",backgroundSize:"20px",borderRadius:"4px"},r),children:void 0!==n?(0,t.jsx)(l,{src:n}):(0,t.jsxs)(o.xv,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(a.eJU,{}),"You have no screenshot yet."]})})}},47731:function(e,n,r){"use strict";r.d(n,{H:function(){return s}});var i=r(2784),t=r(90374),s=function(){var e=(0,t.Z)().openScreenshotsModal,n=(0,i.useState)({sliceFilterFn:function(e){return e}}),r=n[0],s=n[1];return{modalPayload:r,onOpenModal:function(n){s(n),e()}}}},36416:function(e){e.exports={root:"Kbd_root__nBos2"}}}]);